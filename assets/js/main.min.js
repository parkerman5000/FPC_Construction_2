!function(){"use strict";document.addEventListener("DOMContentLoaded",function(){!function(){const e=document.getElementById("nav-toggle"),t=document.getElementById("nav-menu"),n=document.querySelectorAll(".nav__link");if(!e||!t)return;e.addEventListener("click",function(){const e="true"===this.getAttribute("aria-expanded");this.setAttribute("aria-expanded",!e),t.classList.toggle("active"),document.body.style.overflow=e?"":"hidden"}),n.forEach(function(n){n.addEventListener("click",function(){e.setAttribute("aria-expanded","false"),t.classList.remove("active"),document.body.style.overflow=""})}),document.addEventListener("click",function(n){t.contains(n.target)||e.contains(n.target)||!t.classList.contains("active")||(e.setAttribute("aria-expanded","false"),t.classList.remove("active"),document.body.style.overflow="")})}(),function(){const e=document.querySelectorAll('a[href^="#"]'),t=document.querySelector(".header")?.offsetHeight||80;e.forEach(function(e){e.addEventListener("click",function(e){const n=this.getAttribute("href");if("#"===n)return;const o=document.querySelector(n);if(!o)return;e.preventDefault();const r=o.getBoundingClientRect().top+window.pageYOffset-t;window.scrollTo({top:r,behavior:"smooth"}),history.pushState(null,null,n)})})}(),function(){const e=document.querySelectorAll("[data-count]");if(0===e.length)return;const t=function(e){const t=parseInt(e.getAttribute("data-count"),10),n=e.getAttribute("data-suffix")||"",o=2e3,r=performance.now(),a=function(i){const s=i-r,l=Math.min(s/o,1),c=1-Math.pow(1-l,4),d=Math.floor(c*t);e.textContent=d+n,l<1?requestAnimationFrame(a):e.textContent=t+n};requestAnimationFrame(a)},n=new IntersectionObserver(function(e){e.forEach(function(e){e.isIntersecting&&!e.target.classList.contains("animated")&&(e.target.classList.add("animated"),t(e.target))})},{root:null,rootMargin:"0px",threshold:.5});e.forEach(function(e){n.observe(e)})}(),function(){const t=document.querySelector(".testimonials__carousel");if(!t)return;const n=t.querySelector(".testimonials__track"),o=t.querySelector(".testimonials__btn--prev"),r=t.querySelector(".testimonials__btn--next"),a=t.querySelector(".testimonials__dots");if(!n)return;var i=function(e){for(var t=e.slice(),n=t.length-1;n>0;n--){var o=Math.floor(Math.random()*(n+1)),r=t[n];t[n]=t[o],t[o]=r}return t}(e);n.innerHTML="",i.forEach(function(e){var t=document.createElement("div");t.className="testimonial-card",t.innerHTML='<div class="testimonial-card__stars">'+function(e){for(var t="",n=0;n<e;n++)t+='<svg viewBox="0 0 24 24" fill="currentColor"><polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"/></svg>';return t}(e.stars)+'</div><p class="testimonial-card__quote">"'+e.quote+'"</p><div class="testimonial-card__author"><div class="testimonial-card__avatar">'+(e.name.split(" ").map(function(e){return e[0]}).join("")+'</div><div class="testimonial-card__info"><span class="testimonial-card__name">')+e.name+'</span><span class="testimonial-card__role">'+e.role+"</span></div></div>",n.appendChild(t)});var s=n.querySelectorAll(".testimonial-card");if(0===s.length)return;let l=0;const c=s.length;a.innerHTML="",s.forEach(function(e,t){const n=document.createElement("button");n.classList.add("testimonials__dot"),n.setAttribute("aria-label","Go to testimonial "+(t+1)),0===t&&n.classList.add("testimonials__dot--active"),n.addEventListener("click",function(){m(t)}),a.appendChild(n)});const d=a.querySelectorAll(".testimonials__dot");function u(){n.style.transform="translateX(-"+100*l+"%)",d.forEach(function(e,t){e.classList.toggle("testimonials__dot--active",t===l)})}function m(e){l=e,u()}function f(){l=(l+1)%c,u()}function h(){l=(l-1+c)%c,u()}r&&r.addEventListener("click",f);o&&o.addEventListener("click",h);let g=setInterval(f,5e3);t.addEventListener("mouseenter",function(){clearInterval(g)}),t.addEventListener("mouseleave",function(){g=setInterval(f,5e3)});let p=0,v=0;function y(){const e=50,t=p-v;t>e?f():t<-e&&h()}n.addEventListener("touchstart",function(e){p=e.changedTouches[0].screenX},{passive:!0}),n.addEventListener("touchend",function(e){v=e.changedTouches[0].screenX,y()},{passive:!0})}(),function(){const e=document.querySelectorAll(".projects__filter"),t=document.querySelectorAll(".project-card");if(0===e.length||0===t.length)return;e.forEach(function(n){n.addEventListener("click",function(){const n=this.getAttribute("data-filter");e.forEach(function(e){e.classList.remove("projects__filter--active")}),this.classList.add("projects__filter--active"),t.forEach(function(e){const t=e.getAttribute("data-category");"all"===n||t===n?(e.classList.remove("hidden"),e.style.animation="fadeInUp 0.5s ease forwards"):e.classList.add("hidden")})})})}(),function(){const e=document.querySelectorAll(".faq__item");e.forEach(function(t){t.querySelector(".faq__question").addEventListener("click",function(){const n=t.classList.contains("active");this.getAttribute("aria-expanded");e.forEach(function(e){e.classList.remove("active"),e.querySelector(".faq__question").setAttribute("aria-expanded","false")}),n||(t.classList.add("active"),this.setAttribute("aria-expanded","true"))})})}(),function(){const e=document.getElementById("contact-form");if(!e)return;const t={name:{element:e.querySelector("#name"),validate:function(e){return e.trim()?e.trim().length<2?"Name must be at least 2 characters":"":"Please enter your name"}},email:{element:e.querySelector("#email"),validate:function(e){if(!e.trim())return"Please enter your email";return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e)?"":"Please enter a valid email address"}},phone:{element:e.querySelector("#phone"),validate:function(e){if(!e.trim())return"Please enter your phone number";return/^[\d\s\-\(\)\+]{10,}$/.test(e.replace(/\s/g,""))?"":"Please enter a valid phone number"}},service:{element:e.querySelector("#service"),validate:function(e){return e?"":"Please select a service"}}};function n(e){const t=e.validate(e.element.value),n=e.element.parentElement.querySelector(".form__error");if(t){if(e.element.classList.add("error"),n)n.textContent=t;else{const n=document.createElement("span");n.classList.add("form__error"),n.textContent=t,e.element.parentElement.appendChild(n)}return!1}return e.element.classList.remove("error"),n&&n.remove(),!0}Object.keys(t).forEach(function(e){const o=t[e];o.element&&(o.element.addEventListener("blur",function(){n(o)}),o.element.addEventListener("input",function(){this.classList.contains("error")&&n(o)}))}),e.addEventListener("submit",function(o){o.preventDefault();let r=!0;if(Object.keys(t).forEach(function(e){const o=t[e];o.element&&!n(o)&&(r=!1)}),r){const t=e.querySelector('button[type="submit"]'),n=t.textContent;t.textContent="Sending...",t.disabled=!0,setTimeout(function(){const o=document.createElement("div");o.style.cssText="padding: 1rem; background: #10b981; color: white; border-radius: 0.5rem; text-align: center; margin-top: 1rem;",o.textContent="Thank you! Your message has been sent. We will contact you shortly.",e.appendChild(o),e.reset(),t.textContent=n,t.disabled=!1,setTimeout(function(){o.remove()},5e3)},1500)}});const o=e.querySelector("#phone");o&&o.addEventListener("input",function(e){let t=e.target.value.replace(/\D/g,"");t.length>0&&(t=t.length<=3?"("+t:t.length<=6?"("+t.substring(0,3)+") "+t.substring(3):"("+t.substring(0,3)+") "+t.substring(3,6)+"-"+t.substring(6,10)),e.target.value=t})}(),function(){const e=document.getElementById("header");if(!e)return;let t=window.scrollY;window.addEventListener("scroll",function(){const n=window.scrollY;e.style.boxShadow=n>0?"0 4px 6px -1px rgba(0, 0, 0, 0.1)":"",t=n},{passive:!0})}(),function(){const e=document.getElementById("current-year");e&&(e.textContent=(new Date).getFullYear())}(),fetch("assets/data/gallery-config.json").then(function(e){return e.ok?e.json():(console.log("Gallery config not found, using default images"),null)}).then(function(e){var r;e&&("supabase"===(t=e.mode||"local")&&e.supabaseUrl&&e.supabaseBucket&&(n=e.supabaseUrl+"/storage/v1/object/public/"+e.supabaseBucket+"/"),e.projects&&e.projects.length>0&&(r=e.projects,document.querySelectorAll(".project-card").forEach(function(e,n){if(r[n]){var a=r[n],i=e.querySelector("img"),s=e.querySelector("source");if(i){var l=o(a,n);if(i.src=l,s&&"local"===t&&a.localImage){var c="assets/images/projects/"+a.localImage.replace(".jpg",".webp");s.srcset=c}i.onerror=function(){this.src="assets/images/placeholder/project-"+(n+1)+".jpg"}}var d=e.querySelector(".project-card__title"),u=e.querySelector(".project-card__location");d&&a.title&&(d.textContent=a.title),u&&a.location&&(u.textContent=a.location)}})),e.gallery&&e.gallery.length>0&&function(e){var n=document.getElementById("dynamic-gallery");if(n){var r=e.filter(function(e){return"local"===t?e.localImage&&""!==e.localImage.trim():e.gdriveId&&""!==e.gdriveId.trim()});if(0!==r.length){var a=n.querySelector(".gallery__grid");a&&(a.innerHTML="",r.forEach(function(e,n){var r=o(e,n);if(r){var i,s=document.createElement("div");s.className="gallery__item",i="local"===t&&e.localImage?'<picture><source srcset="assets/images/projects/'+e.localImage.replace(".jpg",".webp")+'" type="image/webp"><img src="'+r+'" alt="'+(e.title||"Gallery image")+'" loading="lazy"></picture>':'<img src="'+r+'" alt="'+(e.title||"Gallery image")+'" loading="lazy">',s.innerHTML=i+'<div class="gallery__overlay"><span class="gallery__title">'+(e.title||"")+"</span></div>",s.addEventListener("click",function(){!function(e,t){const n=document.createElement("div");n.className="lightbox",n.innerHTML='<div class="lightbox__backdrop"></div><div class="lightbox__content"><button class="lightbox__close" aria-label="Close">&times;</button><img src="'+e+'" alt="'+(t||"Gallery image")+'">'+(t?'<p class="lightbox__title">'+t+"</p>":"")+"</div>",document.body.appendChild(n),document.body.style.overflow="hidden";var o=function(){n.remove(),document.body.style.overflow=""};n.querySelector(".lightbox__backdrop").addEventListener("click",o),n.querySelector(".lightbox__close").addEventListener("click",o),document.addEventListener("keydown",function e(t){"Escape"===t.key&&(o(),document.removeEventListener("keydown",e))})}(r,e.title)}),a.appendChild(s)}}),n.style.display="block")}else n.style.display="none"}}(e.gallery))}).catch(function(e){console.log("Gallery config loading skipped:",e.message)}),document.querySelectorAll("img").forEach(function(e){e.addEventListener("error",function(){this.classList.add("img-broken"),this.alt="Photo coming soon"})})});var e=[{name:"John Mitchell",role:"Homeowner",stars:5,quote:"Our new driveway is absolutely stunning! The crew was professional from start to finish. They arrived on time, worked efficiently, and left the site spotless. Couldn't be happier with the results."},{name:"Sarah Reynolds",role:"Business Owner",stars:5,quote:"Outstanding work on our commercial project! FPC Construction delivered on time and within budget. Their attention to detail and professionalism made the entire process smooth and stress-free."},{name:"David Thompson",role:"Homeowner",stars:5,quote:"The stamped concrete patio looks amazing and has transformed our backyard into an outdoor oasis. FPC's team was knowledgeable, friendly, and truly cared about getting every detail right."},{name:"Michael Johnson",role:"Homeowner",stars:5,quote:"Best concrete contractor in the area! They repaired our damaged foundation and now it looks better than new. Professional, reliable, and reasonably priced. Highly recommend FPC Construction!"},{name:"Amanda Collins",role:"Homeowner",stars:5,quote:"FPC cleared our 2-acre lot in just two days. The land was perfectly graded and ready for our new build. Their equipment operators really know what they're doing. Would absolutely hire them again."},{name:"Robert Williams",role:"Property Developer",stars:5,quote:"We've used FPC Construction on three separate projects now. Septic installation, grading, and a commercial driveway. Every single time they deliver quality work on schedule. They're our go-to contractor."},{name:"Lisa Patterson",role:"Homeowner",stars:5,quote:"Our privacy fence looks incredible! The crew was respectful of our property and finished ahead of schedule. The fence is solid, level, and exactly what we wanted. Five stars all the way."},{name:"James Carter",role:"Homeowner",stars:5,quote:"Had them install a new septic system for our rural property. Everything passed inspection on the first try. Fair pricing and they explained every step of the process. True professionals."},{name:"Karen Davis",role:"Homeowner",stars:5,quote:"FPC Construction saved us after another contractor left our grading half-done. They came in, fixed the mess, and completed the job beautifully. Honest, hardworking, and dependable."},{name:"Thomas Wright",role:"Business Owner",stars:5,quote:"Hired FPC for our new warehouse foundation. Rock-solid work and they handled all the permitting headaches for us. The kind of contractor you can trust with a handshake. Highly recommend."}];var t="local",n="";function o(e,o){if("supabase"===t&&n){var r=e.supabaseFile||e.localImage;if(r&&""!==r.trim())return n+r}return"local"===t&&e.localImage&&""!==e.localImage.trim()?"assets/images/projects/"+e.localImage:"gdrive"===t&&e.gdriveId&&""!==e.gdriveId.trim()?"https://drive.google.com/thumbnail?id="+e.gdriveId+"&sz=w800":"assets/images/placeholder/project-"+(o+1)+".jpg"}}();